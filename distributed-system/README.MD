## 分布式系统知识点汇总。

### map reduce的原理是什么？

### 一致性哈希是如何实现的？


### 分布式系统和单机系统的区别在哪里？
根本区别在于进程空间时一个还是多个。分布式系统不是放大的单机系统，因为单机没有部分故障的情况。对于单机，我们很容易判断某个进程、某个硬件是否还在正常工作。但在分布式系统中，这是无解的，我们无法及时得知另一台机器的死活，也无法把机器崩溃和网络故障区分开来。这正是分布式系统与单机的最大区别。

### 怎么用Redis来实现分布式锁？
实现思路为:

当我们在执行代码前，先去设置一个分布式锁

其实就是给Redis设置一个Key,但是要这个Key不存再的情况下才可以设置成功

如果设置成功，表示当前进程拿到锁，可以执行后续代码 

如果设置失败，表示其它进程已经锁定，那么我们就要让当前进程休眠一下，然后再去重试设置锁

直到设置锁成功，才表示当前进程锁定，才可以执行自定义代码

在执行自宝义代码后，释放锁，这样其它进程就可以拿到锁了

我们在设置锁的时候，为了防此自定义代码报错，而出现死锁的情况

所以我们在设置锁的时候可以设置锁的一个过期时间，这样就算自定义代码出错，没有释放锁的情况下

其它进程也可以在一定时间内拿到锁，当然可以try,catch把自定义代码包起来


### 什么是CAP原则？
CAP原则又称CAP定理，指的是在一个分布式系统中， Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性），三者不可得兼。

- 一致性（C）：在分布式系统中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本），换句话就是说，任何时刻，所用的应用程序都能访问得到相同的数据。
- 可用性（A）：在集群中一部分节点故障后，集群整体是否还能响应客户端的读写请求。（对数据更新具备高可用性），换句话就是说，任何时候，任何应用程序都可以读写数据。
- 分区容错性（P）：以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择，换句话说，系统可以跨网络分区线性的伸缩和扩展。

要满足P，就是允许网络通信可能失败，那么在多个副本之间的同步就可能存在失败，那么某个副本就可能存在过期的数据。所以当用户访问这个副本时，系统有两种选择：
1. 为了满足强一致性，就一直同步，直到这个副本也得到了最新数据。但是由于通信可能失败，这个同步时间无法满足不超过timeout。即取C舍A。
2. 保证在timeout内返回结果，那么最坏情况下只能得到过期数据，即得不到最新数据，没有满足所有副本都得到最新数据（强一致性）。即取A舍C。

以上两种情况的“舍”都是最坏情况的。没有绝对，只有相对。重点是同步时间和timeout的权衡，如果网络故障率保证能在timeout内完成同步，那么C和A就都满足了。


### GFS是怎么实现的？

### 什么是Raft?
